# README

## Описание
Асинхронный сервис управления задачами.
Проект с Docker Compose. Управление через Makefile.

## Команды

### Запуск

`make start`

Запускает приложение в фоновом режиме.

### Остановка

`make stop`

Останавливает и удаляет контейнеры.

### Создание и активация виртуального окружения

`make venv`

Создание виртуального окружения.

`source venv/bin/activate`

Активация виртуального окружения.

`make install`

Установка зависимостей.

### Миграции

`make migrations`

Применение миграций.

### Тестирование.
Тестирование выполняется после создания, активации виртуального окружения \
и установке зависимостей.

`make test`

Запуск тестов.

### Очистка.

`make clean`

Удаляет директорию виртуального окружения.

## [Документация](http://127.0.0.1:8000/docs)

## Outbox Dispatcher

Отдельный процесс `src/messaging/outbox_dispatcher.py` сейчас запускается вручную (например, как самостоятельный скрипт или через отдельный сервис). \
В рамках тестового задания не было описано, кто именно исполняет задачи и как меняется их статус, \
поэтому автоматический запуск диспетчера не внедрял. \
При необходимости можно подключить его к системе оркестрации, или инициализировать вместе с основным приложением, \
логика диспетчера не зависит от способа запуска.


## Endpoints

### 1. Создание задачи

```
curl -X 'POST' \
  'http://localhost:8000/api/v1/tasks/' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "name": "string",
  "description": "string",
  "priority": "MEDIUM"
}'
```

### 2. Получение списка задач с фильтрацией и пагинацией.

```
curl -X 'GET' \
  'http://127.0.0.1:8000/api/v1/tasks/?status=NEW&priority=MEDIUM&page=1&page_size=20' \
  -H 'accept: application/json'
```

### 3. Получение информации о задаче.

```
curl -X 'GET' \
  'http://127.0.0.1:8000/api/v1/tasks/<TASK_UUID>' \
  -H 'accept: application/json'
```

### 4. Отмена задачи.

```
curl -X 'DELETE' \
  'http://127.0.0.1:8000/api/v1/tasks/<TASK_UUID>' \
  -H 'accept: application/json'
```

### 5. Получение статуса задачи.

```
curl -X 'GET' \
  'http://127.0.0.1:8000/api/v1/tasks/<TASK_UUID>/status' \
  -H 'accept: application/json'
```

# Использованные технологии.
1. Язык программирования - Python 3.12
2. База данных - PostgreSQL 17
3. Брокер сообщений - RabbitMQ
4. Основной фреймворк - FastAPI
5. ORM - SQLAlchemy
6. Система миграций - Alembic


